{"ast":null,"code":"var _jsxFileName = \"/home/breno/front-end-bigbangbeer/src/pages/Register/Index.jsx\";\nimport React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { postNewUser } from \"../../services/trybeerUserAPI\";\nimport bigBangBeerLogo from \"../../assets/images/bigBangBeerLogo.gif\";\nimport \"./styles.css\";\n\nconst formErrors = (testidClass, newUserValue) => {\n  let validReturn;\n  const emailTest = /^(([^<>()[\\].,;:\\s@\"]+(\\.[^<>()[\\].,;:\\s@\"]+)*)|(\".+\"))@(([^<>()[\\].,;:\\s@\"]+\\.)+[^<>()[\\].,;:\\s@\"]{2,})$/i;\n\n  switch (testidClass) {\n    case \"signup-name\":\n      validReturn = newUserValue.length < 11 && newUserValue.length > 0 || !/^[a-zA-Z_ ]+$/.test(newUserValue) && newUserValue.length > 0 ? \"Invalid User\" : \"\";\n      break;\n\n    case \"signup-email\":\n      validReturn = !emailTest.test(newUserValue) && newUserValue.length > 0 ? \"Invalid email\" : \"\";\n      break;\n\n    case \"signup-password\":\n      validReturn = newUserValue.length < 5 && newUserValue.length > 0 ? \"Invalid email\" : \"\";\n      break;\n\n    default:\n      return;\n  }\n\n  return validReturn;\n};\n\nconst inputs = (newUserValue, setNewUserValue, focus, setFocus, testidClass, type, placeholder, write) => {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: `${focus ? \"focus\" : \"txtb\"}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: type,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 7\n    }\n  }, write, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"errorMessageRegister\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 9\n    }\n  }, formErrors(testidClass, newUserValue)), /*#__PURE__*/React.createElement(\"input\", {\n    type: type,\n    \"data-testid\": testidClass,\n    onChange: event => setNewUserValue(event.target.value),\n    value: newUserValue,\n    placeholder: placeholder,\n    className: testidClass,\n    onFocus: () => setFocus(true),\n    onBlur: () => setFocus(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }\n  })));\n};\n\nconst roleInput = (role, setRole) => {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"role\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"checkbox\",\n    \"data-testid\": \"signup-seller\",\n    id: \"role\",\n    onChange: () => role === 'client' ? setRole('administrator') : setRole('client'),\n    className: \"signup-seller\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  }), \"Quero Vender\", /*#__PURE__*/React.createElement(\"span\", {\n    className: \"checkmark\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  })));\n};\n\nconst registerButton = (clickToEnter, isDisabled) => /*#__PURE__*/React.createElement(\"div\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 3\n  }\n}, /*#__PURE__*/React.createElement(\"button\", {\n  type: \"button\",\n  className: \"signup-btn\",\n  \"data-testid\": \"signup-btn\",\n  onClick: () => clickToEnter(),\n  disabled: isDisabled(),\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }\n}, \"Cadastrar\"));\n\nfunction Register() {\n  const [name, setName] = useState('');\n  const [email, setEMail] = useState('');\n  const [password, setPassword] = useState('');\n  const [role, setRole] = useState('client');\n  const [alertEmailExist, setAlertEmailExist] = useState(false);\n  const [focusName, setFocusName] = useState(false);\n  const [focusEmail, setFocusEmail] = useState(false);\n  const [focusPassword, setFocusPassword] = useState(false);\n  const history = useHistory();\n\n  const clickToEnter = async () => {\n    const newUser = await postNewUser(name, email, password, role);\n    console.log(newUser);\n\n    if (newUser.error) {\n      return new Promise(resolve => resolve(setAlertEmailExist(newUser.err.response.data))).then(() => setTimeout(() => {\n        setAlertEmailExist(false);\n      }, 3000));\n    }\n\n    if (role === 'administrator') {\n      return history.push('/admin/orders');\n    }\n\n    history.push('/products');\n  };\n\n  const isDisabled = () => {\n    const emailTest = /^(([^<>()[\\].,;:\\s@\"]+(\\.[^<>()[\\].,;:\\s@\"]+)*)|(\".+\"))@(([^<>()[\\].,;:\\s@\"]+\\.)+[^<>()[\\].,;:\\s@\"]{2,})$/i;\n    if (name.length > 11 && password.length > 5 && email.match(emailTest) && /^[a-zA-Z_ ]+$/.test(name)) return false;\n    return true;\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: bigBangBeerLogo,\n    alt: \"bing bang beer logo\",\n    className: \"big-bang-beer-logo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }\n  }, \"Registro\"), alertEmailExist && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"emailExists\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 27\n    }\n  }, \"E-mail already in database.\"), inputs(name, setName, focusName, setFocusName, \"signup-name\", \"text\", \"nome\", \"Nome\"), inputs(email, setEMail, focusEmail, setFocusEmail, \"signup-email\", \"email\", \"email\", \"Email\"), inputs(password, setPassword, focusPassword, setFocusPassword, \"signup-password\", \"password\", \"senha\", \"Password\"), roleInput(role, setRole), registerButton(clickToEnter, isDisabled));\n}\n\nexport default Register;","map":{"version":3,"sources":["/home/breno/front-end-bigbangbeer/src/pages/Register/Index.jsx"],"names":["React","useState","useHistory","postNewUser","bigBangBeerLogo","formErrors","testidClass","newUserValue","validReturn","emailTest","length","test","inputs","setNewUserValue","focus","setFocus","type","placeholder","write","event","target","value","roleInput","role","setRole","registerButton","clickToEnter","isDisabled","Register","name","setName","email","setEMail","password","setPassword","alertEmailExist","setAlertEmailExist","focusName","setFocusName","focusEmail","setFocusEmail","focusPassword","setFocusPassword","history","newUser","console","log","error","Promise","resolve","err","response","data","then","setTimeout","push","match"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { postNewUser } from \"../../services/trybeerUserAPI\";\nimport bigBangBeerLogo from \"../../assets/images/bigBangBeerLogo.gif\";\nimport \"./styles.css\";\n\n\nconst formErrors = (testidClass, newUserValue) => {\n  let validReturn;\n  const emailTest = /^(([^<>()[\\].,;:\\s@\"]+(\\.[^<>()[\\].,;:\\s@\"]+)*)|(\".+\"))@(([^<>()[\\].,;:\\s@\"]+\\.)+[^<>()[\\].,;:\\s@\"]{2,})$/i;\n  switch(testidClass){\n    case \"signup-name\":\n      validReturn =\n        (newUserValue.length < 11 && newUserValue.length > 0)\n          ||\n        (!/^[a-zA-Z_ ]+$/.test(newUserValue) && newUserValue.length > 0)\n          ? \"Invalid User\" : \"\";\n    break;\n    case \"signup-email\":\n      validReturn = !emailTest.test(newUserValue) && newUserValue.length > 0 ? \"Invalid email\" : \"\";\n    break;\n    case \"signup-password\":\n      validReturn = newUserValue.length < 5 && newUserValue.length > 0 ? \"Invalid email\" : \"\";\n    break;\n    default:\n    return;\n  }\n  return validReturn;\n}\n\nconst inputs = (newUserValue, setNewUserValue, focus, setFocus, testidClass, type, placeholder, write) => {\n  return (\n    <div className={`${focus ? \"focus\" : \"txtb\"}`}>\n      <label htmlFor={type}>\n        {write}\n        <div className=\"errorMessageRegister\">{formErrors(testidClass, newUserValue)}</div>\n        <input\n          type={type}\n          data-testid={testidClass}\n          onChange={(event) => setNewUserValue(event.target.value)}\n          value={newUserValue}\n          placeholder={placeholder}\n          className={testidClass}\n          onFocus={() => setFocus(true)}\n          onBlur={() => setFocus(false)}\n        />\n        <span></span>\n      </label>\n    </div>\n  );\n};\n\nconst roleInput = (role, setRole) => {\n  return (\n    <div>\n      <label htmlFor=\"role\">\n        <input\n          type=\"checkbox\"\n          data-testid=\"signup-seller\"\n          id=\"role\"\n          onChange={() => (role === 'client')\n            ? setRole('administrator')\n            : setRole('client')}\n          className=\"signup-seller\"\n        />\n        Quero Vender\n        <span className=\"checkmark\"></span>\n      </label>\n    </div>\n  );\n};\n\nconst registerButton = (clickToEnter, isDisabled) => (\n  <div>\n    <button\n      type=\"button\"\n      className=\"signup-btn\"\n      data-testid=\"signup-btn\"\n      onClick={() => clickToEnter()}\n      disabled={isDisabled()}\n    >\n      Cadastrar\n    </button>\n  </div>\n);\n\nfunction Register() {\n  const [name, setName] = useState('');\n  const [email, setEMail] = useState('');\n  const [password, setPassword] = useState('');\n  const [role, setRole] = useState('client');\n  const [alertEmailExist, setAlertEmailExist] = useState(false);\n  const [focusName, setFocusName] = useState(false);\n  const [focusEmail, setFocusEmail] = useState(false);\n  const [focusPassword, setFocusPassword] = useState(false);\n\n  const history = useHistory();\n\n  const clickToEnter = async () => {\n    const newUser = await postNewUser(name, email, password, role);\n\n    console.log(newUser)\n    if (newUser.error) {\n      return new Promise((resolve) => resolve(setAlertEmailExist(newUser.err.response.data)))\n        .then(() => setTimeout(() => {\n          setAlertEmailExist(false)\n        }, 3000)\n      );\n    }\n    if (role === 'administrator') {\n      return history.push('/admin/orders')\n    }\n    history.push('/products');\n  };\n\n  const isDisabled = () => {\n    const emailTest = /^(([^<>()[\\].,;:\\s@\"]+(\\.[^<>()[\\].,;:\\s@\"]+)*)|(\".+\"))@(([^<>()[\\].,;:\\s@\"]+\\.)+[^<>()[\\].,;:\\s@\"]{2,})$/i;\n    if (name.length > 11 && password.length > 5 && email.match(emailTest) && /^[a-zA-Z_ ]+$/.test(name)) return false;\n    return true;\n  };\n\n  return (\n    <div className=\"login-form\">\n      <img src={bigBangBeerLogo} alt=\"bing bang beer logo\" className=\"big-bang-beer-logo\" />\n      <h1>Registro</h1>\n      {alertEmailExist && <p className=\"emailExists\">E-mail already in database.</p>}\n      {inputs(name, setName, focusName, setFocusName, \"signup-name\", \"text\", \"nome\", \"Nome\")}\n      {inputs(email, setEMail, focusEmail, setFocusEmail, \"signup-email\", \"email\", \"email\", \"Email\")}\n      {inputs(password, setPassword, focusPassword, setFocusPassword, \"signup-password\", \"password\", \"senha\", \"Password\")}\n      {roleInput(role, setRole)}\n      {registerButton(clickToEnter, isDisabled)}\n    </div>\n  );\n}\n\nexport default Register;\n"]},"metadata":{},"sourceType":"module"}